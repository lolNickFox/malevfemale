---
title: "malevfemale"
author: "Nick_Fox"
date: "4/26/2017"
output: html_document
---

#init

```{r}
#install.packages("tm")
#install.packages("dplyr")
#install.packages("plyr")
#install.packages("class")
#install.packages("ggplot2")
#install.packages("tidytext")
#install.packages("stringr")


library("tm")
library("dplyr")
library("plyr")
library("class")
library("ggplot2")
library("tidytext")
library("stringr")

#set options
options(stringsAsFactors = FALSE)

#set wd
setwd("/Users/Nick_Fox/Dropbox/GitHub_master/data/malevfemale")

```

```{r}

male_words1 <- readr::read_lines("male/Aragones characterization of hispanic population in health research.txt")
male_words2 <- readr::read_lines("male/Areheart 2008 When Disability Isnt Just Right- The Entrenchment of the Medic.txt")
male_words3 <- readr::read_lines("male/Baerlocher 2010 data integrity and fraud in medical research.txt")
male_words4 <- readr::read_lines("male/Bandura SCT of mass communication.txt")
male_words5 <- readr::read_lines("male/Banglawala 2015 recent randomized controlled trials in otolaryngology.txt")

mwords1 <- tidy(male_words1)
mwords2 <- tidy(male_words2)
mwords3 <- tidy(male_words3)
mwords4 <- tidy(male_words4)
mwords5 <- tidy(male_words5)

words <- dplyr::bind_rows(mwords1, mwords2, mwords3, mwords4, mwords5, .id = "id") %>% 
  mutate(gender = "male")

tidy_words <- words %>%
  unnest_tokens(word, x)

data("stop_words")
tidy_words <- tidy_words %>%
  anti_join(stop_words)

tidy_words %>% 
  dplyr::count(word, sort = TRUE)



```


```{r}

library(tidyr)
bing <- sentiments %>%
        filter(lexicon == "bing") %>%
        select(-score)


word_sentiment <- tidy_words %>%
  inner_join(bing) %>% 
  dplyr::count(id, word, gender, sentiment, sort = TRUE) %>% 
  spread(sentiment, n, fill = 0) %>% 
  mutate(sentiment = positive - negative)
  

word_sentiment %>%
  summary(avr_sentiment = mean(sentiment))



```

